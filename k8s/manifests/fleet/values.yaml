hostName: nexus-mdm.harvestasya.org
replicas: 1

fleet:
  autoApplySQLMigrations: true
  listenPort: 8080
  tls:
    enabled: false # TLS terminated by Traefik

database:
  address: 127.0.0.1:3306 # overridden by FLEET_MYSQL_ADDRESS from secret
  database: fleet
  username: fleet
  secretName: fleet-mysql-secret
  passwordKey: mysql-password

cache:
  address: valkey-primary:6379
  usePassword: true
  secretName: fleet-valkey-secret
  passwordKey: valkey-password

resources:
  limits:
    cpu: 1
    memory: 2Gi
  requests:
    cpu: 100m
    memory: 256Mi

osquery:
  logging:
    statusPlugin: filesystem
    resultPlugin: filesystem

ingress:
  enabled: false

# Override FLEET_MYSQL_ADDRESS from secret (keep host out of public repo)
envsFrom:
- name: FLEET_MYSQL_ADDRESS
  valueFrom:
    secretKeyRef:
      name: fleet-server-secret
      key: FLEET_MYSQL_ADDRESS
